{"ast":null,"code":"var traverse = module.exports = function (obj) {\n  return new Traverse(obj);\n};\n\nfunction Traverse(obj) {\n  this.value = obj;\n}\n\nTraverse.prototype.get = function (ps) {\n  var node = this.value;\n\n  for (var i = 0; i < ps.length; i++) {\n    var key = ps[i];\n\n    if (!node || !hasOwnProperty.call(node, key)) {\n      node = undefined;\n      break;\n    }\n\n    node = node[key];\n  }\n\n  return node;\n};\n\nTraverse.prototype.has = function (ps) {\n  var node = this.value;\n\n  for (var i = 0; i < ps.length; i++) {\n    var key = ps[i];\n\n    if (!node || !hasOwnProperty.call(node, key)) {\n      return false;\n    }\n\n    node = node[key];\n  }\n\n  return true;\n};\n\nTraverse.prototype.set = function (ps, value) {\n  var node = this.value;\n\n  for (var i = 0; i < ps.length - 1; i++) {\n    var key = ps[i];\n    if (!hasOwnProperty.call(node, key)) node[key] = {};\n    node = node[key];\n  }\n\n  node[ps[i]] = value;\n  return value;\n};\n\nTraverse.prototype.map = function (cb) {\n  return walk(this.value, cb, true);\n};\n\nTraverse.prototype.forEach = function (cb) {\n  this.value = walk(this.value, cb, false);\n  return this.value;\n};\n\nTraverse.prototype.reduce = function (cb, init) {\n  var skip = arguments.length === 1;\n  var acc = skip ? this.value : init;\n  this.forEach(function (x) {\n    if (!this.isRoot || !skip) {\n      acc = cb.call(this, acc, x);\n    }\n  });\n  return acc;\n};\n\nTraverse.prototype.paths = function () {\n  var acc = [];\n  this.forEach(function (x) {\n    acc.push(this.path);\n  });\n  return acc;\n};\n\nTraverse.prototype.nodes = function () {\n  var acc = [];\n  this.forEach(function (x) {\n    acc.push(this.node);\n  });\n  return acc;\n};\n\nTraverse.prototype.clone = function () {\n  var parents = [],\n      nodes = [];\n  return function clone(src) {\n    for (var i = 0; i < parents.length; i++) {\n      if (parents[i] === src) {\n        return nodes[i];\n      }\n    }\n\n    if (typeof src === 'object' && src !== null) {\n      var dst = copy(src);\n      parents.push(src);\n      nodes.push(dst);\n      forEach(objectKeys(src), function (key) {\n        dst[key] = clone(src[key]);\n      });\n      parents.pop();\n      nodes.pop();\n      return dst;\n    } else {\n      return src;\n    }\n  }(this.value);\n};\n\nfunction walk(root, cb, immutable) {\n  var path = [];\n  var parents = [];\n  var alive = true;\n  return function walker(node_) {\n    var node = immutable ? copy(node_) : node_;\n    var modifiers = {};\n    var keepGoing = true;\n    var state = {\n      node: node,\n      node_: node_,\n      path: [].concat(path),\n      parent: parents[parents.length - 1],\n      parents: parents,\n      key: path.slice(-1)[0],\n      isRoot: path.length === 0,\n      level: path.length,\n      circular: null,\n      update: function (x, stopHere) {\n        if (!state.isRoot) {\n          state.parent.node[state.key] = x;\n        }\n\n        state.node = x;\n        if (stopHere) keepGoing = false;\n      },\n      'delete': function (stopHere) {\n        delete state.parent.node[state.key];\n        if (stopHere) keepGoing = false;\n      },\n      remove: function (stopHere) {\n        if (isArray(state.parent.node)) {\n          state.parent.node.splice(state.key, 1);\n        } else {\n          delete state.parent.node[state.key];\n        }\n\n        if (stopHere) keepGoing = false;\n      },\n      keys: null,\n      before: function (f) {\n        modifiers.before = f;\n      },\n      after: function (f) {\n        modifiers.after = f;\n      },\n      pre: function (f) {\n        modifiers.pre = f;\n      },\n      post: function (f) {\n        modifiers.post = f;\n      },\n      stop: function () {\n        alive = false;\n      },\n      block: function () {\n        keepGoing = false;\n      }\n    };\n    if (!alive) return state;\n\n    function updateState() {\n      if (typeof state.node === 'object' && state.node !== null) {\n        if (!state.keys || state.node_ !== state.node) {\n          state.keys = objectKeys(state.node);\n        }\n\n        state.isLeaf = state.keys.length == 0;\n\n        for (var i = 0; i < parents.length; i++) {\n          if (parents[i].node_ === node_) {\n            state.circular = parents[i];\n            break;\n          }\n        }\n      } else {\n        state.isLeaf = true;\n        state.keys = null;\n      }\n\n      state.notLeaf = !state.isLeaf;\n      state.notRoot = !state.isRoot;\n    }\n\n    updateState(); // use return values to update if defined\n\n    var ret = cb.call(state, state.node);\n    if (ret !== undefined && state.update) state.update(ret);\n    if (modifiers.before) modifiers.before.call(state, state.node);\n    if (!keepGoing) return state;\n\n    if (typeof state.node == 'object' && state.node !== null && !state.circular) {\n      parents.push(state);\n      updateState();\n      forEach(state.keys, function (key, i) {\n        path.push(key);\n        if (modifiers.pre) modifiers.pre.call(state, state.node[key], key);\n        var child = walker(state.node[key]);\n\n        if (immutable && hasOwnProperty.call(state.node, key)) {\n          state.node[key] = child.node;\n        }\n\n        child.isLast = i == state.keys.length - 1;\n        child.isFirst = i == 0;\n        if (modifiers.post) modifiers.post.call(state, child);\n        path.pop();\n      });\n      parents.pop();\n    }\n\n    if (modifiers.after) modifiers.after.call(state, state.node);\n    return state;\n  }(root).node;\n}\n\nfunction copy(src) {\n  if (typeof src === 'object' && src !== null) {\n    var dst;\n\n    if (isArray(src)) {\n      dst = [];\n    } else if (isDate(src)) {\n      dst = new Date(src.getTime ? src.getTime() : src);\n    } else if (isRegExp(src)) {\n      dst = new RegExp(src);\n    } else if (isError(src)) {\n      dst = {\n        message: src.message\n      };\n    } else if (isBoolean(src)) {\n      dst = new Boolean(src);\n    } else if (isNumber(src)) {\n      dst = new Number(src);\n    } else if (isString(src)) {\n      dst = new String(src);\n    } else if (Object.create && Object.getPrototypeOf) {\n      dst = Object.create(Object.getPrototypeOf(src));\n    } else if (src.constructor === Object) {\n      dst = {};\n    } else {\n      var proto = src.constructor && src.constructor.prototype || src.__proto__ || {};\n\n      var T = function () {};\n\n      T.prototype = proto;\n      dst = new T();\n    }\n\n    forEach(objectKeys(src), function (key) {\n      dst[key] = src[key];\n    });\n    return dst;\n  } else return src;\n}\n\nvar objectKeys = Object.keys || function keys(obj) {\n  var res = [];\n\n  for (var key in obj) res.push(key);\n\n  return res;\n};\n\nfunction toS(obj) {\n  return Object.prototype.toString.call(obj);\n}\n\nfunction isDate(obj) {\n  return toS(obj) === '[object Date]';\n}\n\nfunction isRegExp(obj) {\n  return toS(obj) === '[object RegExp]';\n}\n\nfunction isError(obj) {\n  return toS(obj) === '[object Error]';\n}\n\nfunction isBoolean(obj) {\n  return toS(obj) === '[object Boolean]';\n}\n\nfunction isNumber(obj) {\n  return toS(obj) === '[object Number]';\n}\n\nfunction isString(obj) {\n  return toS(obj) === '[object String]';\n}\n\nvar isArray = Array.isArray || function isArray(xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nvar forEach = function (xs, fn) {\n  if (xs.forEach) return xs.forEach(fn);else for (var i = 0; i < xs.length; i++) {\n    fn(xs[i], i, xs);\n  }\n};\n\nforEach(objectKeys(Traverse.prototype), function (key) {\n  traverse[key] = function (obj) {\n    var args = [].slice.call(arguments, 1);\n    var t = new Traverse(obj);\n    return t[key].apply(t, args);\n  };\n});\n\nvar hasOwnProperty = Object.hasOwnProperty || function (obj, key) {\n  return key in obj;\n};","map":{"version":3,"sources":["z:/Projects/EtherealOrgan-copy/Complete Project/client/node_modules/traverse/index.js"],"names":["traverse","module","exports","obj","Traverse","value","prototype","get","ps","node","i","length","key","hasOwnProperty","call","undefined","has","set","map","cb","walk","forEach","reduce","init","skip","arguments","acc","x","isRoot","paths","push","path","nodes","clone","parents","src","dst","copy","objectKeys","pop","root","immutable","alive","walker","node_","modifiers","keepGoing","state","concat","parent","slice","level","circular","update","stopHere","remove","isArray","splice","keys","before","f","after","pre","post","stop","block","updateState","isLeaf","notLeaf","notRoot","ret","child","isLast","isFirst","isDate","Date","getTime","isRegExp","RegExp","isError","message","isBoolean","Boolean","isNumber","Number","isString","String","Object","create","getPrototypeOf","constructor","proto","__proto__","T","res","toS","toString","Array","xs","fn","args","t","apply"],"mappings":"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","sourcesContent":["var traverse = module.exports = function (obj) {\n    return new Traverse(obj);\n};\n\nfunction Traverse (obj) {\n    this.value = obj;\n}\n\nTraverse.prototype.get = function (ps) {\n    var node = this.value;\n    for (var i = 0; i < ps.length; i ++) {\n        var key = ps[i];\n        if (!node || !hasOwnProperty.call(node, key)) {\n            node = undefined;\n            break;\n        }\n        node = node[key];\n    }\n    return node;\n};\n\nTraverse.prototype.has = function (ps) {\n    var node = this.value;\n    for (var i = 0; i < ps.length; i ++) {\n        var key = ps[i];\n        if (!node || !hasOwnProperty.call(node, key)) {\n            return false;\n        }\n        node = node[key];\n    }\n    return true;\n};\n\nTraverse.prototype.set = function (ps, value) {\n    var node = this.value;\n    for (var i = 0; i < ps.length - 1; i ++) {\n        var key = ps[i];\n        if (!hasOwnProperty.call(node, key)) node[key] = {};\n        node = node[key];\n    }\n    node[ps[i]] = value;\n    return value;\n};\n\nTraverse.prototype.map = function (cb) {\n    return walk(this.value, cb, true);\n};\n\nTraverse.prototype.forEach = function (cb) {\n    this.value = walk(this.value, cb, false);\n    return this.value;\n};\n\nTraverse.prototype.reduce = function (cb, init) {\n    var skip = arguments.length === 1;\n    var acc = skip ? this.value : init;\n    this.forEach(function (x) {\n        if (!this.isRoot || !skip) {\n            acc = cb.call(this, acc, x);\n        }\n    });\n    return acc;\n};\n\nTraverse.prototype.paths = function () {\n    var acc = [];\n    this.forEach(function (x) {\n        acc.push(this.path); \n    });\n    return acc;\n};\n\nTraverse.prototype.nodes = function () {\n    var acc = [];\n    this.forEach(function (x) {\n        acc.push(this.node);\n    });\n    return acc;\n};\n\nTraverse.prototype.clone = function () {\n    var parents = [], nodes = [];\n    \n    return (function clone (src) {\n        for (var i = 0; i < parents.length; i++) {\n            if (parents[i] === src) {\n                return nodes[i];\n            }\n        }\n        \n        if (typeof src === 'object' && src !== null) {\n            var dst = copy(src);\n            \n            parents.push(src);\n            nodes.push(dst);\n            \n            forEach(objectKeys(src), function (key) {\n                dst[key] = clone(src[key]);\n            });\n            \n            parents.pop();\n            nodes.pop();\n            return dst;\n        }\n        else {\n            return src;\n        }\n    })(this.value);\n};\n\nfunction walk (root, cb, immutable) {\n    var path = [];\n    var parents = [];\n    var alive = true;\n    \n    return (function walker (node_) {\n        var node = immutable ? copy(node_) : node_;\n        var modifiers = {};\n        \n        var keepGoing = true;\n        \n        var state = {\n            node : node,\n            node_ : node_,\n            path : [].concat(path),\n            parent : parents[parents.length - 1],\n            parents : parents,\n            key : path.slice(-1)[0],\n            isRoot : path.length === 0,\n            level : path.length,\n            circular : null,\n            update : function (x, stopHere) {\n                if (!state.isRoot) {\n                    state.parent.node[state.key] = x;\n                }\n                state.node = x;\n                if (stopHere) keepGoing = false;\n            },\n            'delete' : function (stopHere) {\n                delete state.parent.node[state.key];\n                if (stopHere) keepGoing = false;\n            },\n            remove : function (stopHere) {\n                if (isArray(state.parent.node)) {\n                    state.parent.node.splice(state.key, 1);\n                }\n                else {\n                    delete state.parent.node[state.key];\n                }\n                if (stopHere) keepGoing = false;\n            },\n            keys : null,\n            before : function (f) { modifiers.before = f },\n            after : function (f) { modifiers.after = f },\n            pre : function (f) { modifiers.pre = f },\n            post : function (f) { modifiers.post = f },\n            stop : function () { alive = false },\n            block : function () { keepGoing = false }\n        };\n        \n        if (!alive) return state;\n        \n        function updateState() {\n            if (typeof state.node === 'object' && state.node !== null) {\n                if (!state.keys || state.node_ !== state.node) {\n                    state.keys = objectKeys(state.node)\n                }\n                \n                state.isLeaf = state.keys.length == 0;\n                \n                for (var i = 0; i < parents.length; i++) {\n                    if (parents[i].node_ === node_) {\n                        state.circular = parents[i];\n                        break;\n                    }\n                }\n            }\n            else {\n                state.isLeaf = true;\n                state.keys = null;\n            }\n            \n            state.notLeaf = !state.isLeaf;\n            state.notRoot = !state.isRoot;\n        }\n        \n        updateState();\n        \n        // use return values to update if defined\n        var ret = cb.call(state, state.node);\n        if (ret !== undefined && state.update) state.update(ret);\n        \n        if (modifiers.before) modifiers.before.call(state, state.node);\n        \n        if (!keepGoing) return state;\n        \n        if (typeof state.node == 'object'\n        && state.node !== null && !state.circular) {\n            parents.push(state);\n            \n            updateState();\n            \n            forEach(state.keys, function (key, i) {\n                path.push(key);\n                \n                if (modifiers.pre) modifiers.pre.call(state, state.node[key], key);\n                \n                var child = walker(state.node[key]);\n                if (immutable && hasOwnProperty.call(state.node, key)) {\n                    state.node[key] = child.node;\n                }\n                \n                child.isLast = i == state.keys.length - 1;\n                child.isFirst = i == 0;\n                \n                if (modifiers.post) modifiers.post.call(state, child);\n                \n                path.pop();\n            });\n            parents.pop();\n        }\n        \n        if (modifiers.after) modifiers.after.call(state, state.node);\n        \n        return state;\n    })(root).node;\n}\n\nfunction copy (src) {\n    if (typeof src === 'object' && src !== null) {\n        var dst;\n        \n        if (isArray(src)) {\n            dst = [];\n        }\n        else if (isDate(src)) {\n            dst = new Date(src.getTime ? src.getTime() : src);\n        }\n        else if (isRegExp(src)) {\n            dst = new RegExp(src);\n        }\n        else if (isError(src)) {\n            dst = { message: src.message };\n        }\n        else if (isBoolean(src)) {\n            dst = new Boolean(src);\n        }\n        else if (isNumber(src)) {\n            dst = new Number(src);\n        }\n        else if (isString(src)) {\n            dst = new String(src);\n        }\n        else if (Object.create && Object.getPrototypeOf) {\n            dst = Object.create(Object.getPrototypeOf(src));\n        }\n        else if (src.constructor === Object) {\n            dst = {};\n        }\n        else {\n            var proto =\n                (src.constructor && src.constructor.prototype)\n                || src.__proto__\n                || {}\n            ;\n            var T = function () {};\n            T.prototype = proto;\n            dst = new T;\n        }\n        \n        forEach(objectKeys(src), function (key) {\n            dst[key] = src[key];\n        });\n        return dst;\n    }\n    else return src;\n}\n\nvar objectKeys = Object.keys || function keys (obj) {\n    var res = [];\n    for (var key in obj) res.push(key)\n    return res;\n};\n\nfunction toS (obj) { return Object.prototype.toString.call(obj) }\nfunction isDate (obj) { return toS(obj) === '[object Date]' }\nfunction isRegExp (obj) { return toS(obj) === '[object RegExp]' }\nfunction isError (obj) { return toS(obj) === '[object Error]' }\nfunction isBoolean (obj) { return toS(obj) === '[object Boolean]' }\nfunction isNumber (obj) { return toS(obj) === '[object Number]' }\nfunction isString (obj) { return toS(obj) === '[object String]' }\n\nvar isArray = Array.isArray || function isArray (xs) {\n    return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nvar forEach = function (xs, fn) {\n    if (xs.forEach) return xs.forEach(fn)\n    else for (var i = 0; i < xs.length; i++) {\n        fn(xs[i], i, xs);\n    }\n};\n\nforEach(objectKeys(Traverse.prototype), function (key) {\n    traverse[key] = function (obj) {\n        var args = [].slice.call(arguments, 1);\n        var t = new Traverse(obj);\n        return t[key].apply(t, args);\n    };\n});\n\nvar hasOwnProperty = Object.hasOwnProperty || function (obj, key) {\n    return key in obj;\n};\n"]},"metadata":{},"sourceType":"script"}